<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Open Site Counter</title>
		<meta charset="UTF-8">		
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<script src="https://westerbay.github.io/Home-Page/script/skull.js"></script>		
		<link rel="icon" href="https://westerbay.github.io/Home-Page/img/icon.png">
		<link href='https://westerbay.github.io/Home-Page/style/skull.css' rel='stylesheet'>
		<link href='https://westerbay.github.io/Home-Page/style/header.css' rel='stylesheet'>
		<link href='https://westerbay.github.io/Home-Page/style/footer.css' rel='stylesheet'>

		<link href='style.css' rel='stylesheet'>
		<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
		<script src="display.js"></script>
    	<script src="main.js"></script>		
	</head>
	<body>
		<main>
			<h2>Open Site Counter</h2>
			<p class="intro">
				Check how many times a registered website has been visited and how many unique visitors it received.
				<br>
				<a href="#" id="openModal">How to connect your site?</a>
			</p>
			<form id="getStatsForm">
				<input type="text" id="hostnameInput" placeholder="example.org" required>
				<button type="submit">Get statistics</button>
			</form>
			<div id="result" class="hidden"></div>
		</main>

		<!-- Modal Overlay -->
		<div id="overlay" class="hidden"></div>

		<!-- Centered Modal -->
		<div id="modal" class="hidden">
			<!-- Modal Content -->
			<div class="modal-content">
				<h3>Connect your site</h3>
				<p>
					You can register your website to be tracked in <strong>two simple ways</strong>:
				</p>

				<ol style="text-align:left; margin:0 auto; max-width:650px;">
					<li>
						<strong>Automatic method</strong> — simply include this script in your web page:
						<pre><code>&lt;script src="register.js"&gt;&lt;/script&gt;</code></pre>
						Every time a visitor loads your page, their visit will be registered automatically through the Open Site Counter API.
					</li>

					<li style="margin-top:14px;">
						<strong>Manual method</strong> — you can directly call the API endpoint to record or retrieve data:
						<pre><code class="lang-js">
// Example using jQuery
$.ajax({
	url: "https://wester.games/opensitecounter/get",
	type: "POST",
	contentType: "application/json",
	data: JSON.stringify({ hostname: "example.org" }),
	success: function(response) {
		console.log(response);
		// {
		//   ok: true,
		//   hostname: "example.org",
		//   total_occurrences: 128,
		//   unique_visitors: 92,
		//   graph_png_base64: "..."
		// }
	},
	error: function() {
		console.error("Server error");
	}
});
						</code></pre>
						This will call your local API, returning visit statistics and a graph in Base64 format.
					</li>
				</ol>

				<p style="margin-top:18px; color:var(--muted); font-size:0.9rem;">
					⚠️ <strong>Important:</strong> Once your domain is registered, <em>anyone</em> who knows your hostname can also view its statistics.
				</p>

				<button id="closeModal">Close</button>
			</div>
		</div>
		<script>load("Project");</script>
	</body>
</html>
